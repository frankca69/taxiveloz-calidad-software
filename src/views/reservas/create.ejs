
<div class="container mt-5">
    <h2>Crear Nueva Reserva</h2>

    <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert alert-danger" role="alert">
            <%= error %>
        </div>
    <% } %>

    <form action="/reservas" method="POST">
        <div class="mb-3">
            <label for="cliente_id" class="form-label">Cliente*</label>
            <select class="form-select" id="cliente_id" name="cliente_id" required>
                <option value="">Seleccione un cliente</option>
                <% clientes.forEach(cliente => { %>
                    <option value="<%= cliente.id %>" <%= (typeof oldInput !== 'undefined' && oldInput.cliente_id == cliente.id) ? 'selected' : '' %>>
                        <%= cliente.display_name %>
                    </option>
                <% }); %>
            </select>
        </div>

        <div class="mb-3">
            <label for="chofer_id" class="form-label">Chofer y Vehículo*</label>
            <select class="form-select" id="chofer_id" name="chofer_id" required>
                <option value="">Seleccione un chofer y vehículo</option>
                <% choferes.forEach(chofer => { %>
                    <option value="<%= chofer.id %>" <%= (typeof oldInput !== 'undefined' && oldInput.chofer_id == chofer.id) ? 'selected' : '' %>>
                        <%= chofer.display_name %>
                    </option>
                <% }); %>
            </select>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="fecha" class="form-label">Fecha*</label>
                <input type="date" class="form-control" id="fecha" name="fecha" value="<%= (typeof oldInput !== 'undefined' && oldInput.fecha) ? oldInput.fecha : '' %>" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="tarifa" class="form-label">Tarifa*</label>
                <input type="number" step="0.01" class="form-control" id="tarifa" name="tarifa" value="<%= (typeof oldInput !== 'undefined' && oldInput.tarifa) ? oldInput.tarifa : '' %>" required>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="hora_inicio" class="form-label">Hora de Inicio</label>
                <input type="time" class="form-control" id="hora_inicio" name="hora_inicio" value="<%= (typeof oldInput !== 'undefined' && oldInput.hora_inicio) ? oldInput.hora_inicio : '' %>">
            </div>
            <div class="col-md-6 mb-3">
                <label for="hora_fin" class="form-label">Hora de Fin</label>
                <input type="time" class="form-control" id="hora_fin" name="hora_fin" value="<%= (typeof oldInput !== 'undefined' && oldInput.hora_fin) ? oldInput.hora_fin : '' %>">
            </div>
        </div>

        <div class="mb-3">
            <label for="origen" class="form-label">Origen</label>
            <input type="text" class="form-control" id="origen" name="origen" value="<%= (typeof oldInput !== 'undefined' && oldInput.origen) ? oldInput.origen : '' %>">
        </div>

        <div class="mb-3">
            <label for="destino" class="form-label">Destino</label>
            <input type="text" class="form-control" id="destino" name="destino" value="<%= (typeof oldInput !== 'undefined' && oldInput.destino) ? oldInput.destino : '' %>">
        </div>

        <div class="mb-3">
            <label for="tipo_pago" class="form-label">Tipo de Pago*</label>
            <select class="form-select" id="tipo_pago" name="tipo_pago" required>
                <option value="">Seleccione un tipo de pago</option>
                <option value="efectivo" <%= (typeof oldInput !== 'undefined' && oldInput.tipo_pago === 'efectivo') ? 'selected' : '' %>>Efectivo</option>
                <option value="virtual" <%= (typeof oldInput !== 'undefined' && oldInput.tipo_pago === 'virtual') ? 'selected' : '' %>>Virtual</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Guardar Reserva</button>
        <a href="/reservas" class="btn btn-secondary">Cancelar</a>
    </form>
</div>

